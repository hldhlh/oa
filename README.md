# 火锅店OA系统

一个专为连锁火锅店设计的现代化办公自动化系统，基于HTML、Tailwind CSS和Supabase构建。

## 🚀 功能特性

### 核心功能
- **文档管理**: 文档存储、搜索、实时查看和版本控制
- **配方管理**: 火锅底料配方管理、原料配比和制作工艺
- **安全权限**: 基于角色的访问控制和操作日志记录
- **门店管理**: 多门店信息管理和业绩统计
- **员工管理**: 员工档案、考勤和培训记录
- **报表分析**: 销售数据分析和可视化图表

### 技术特性
- 🎨 **现代UI**: 基于Tailwind CSS的响应式设计
- 🔐 **安全认证**: Supabase身份验证和行级安全策略
- 📱 **移动适配**: 完全响应式，支持移动设备
- ⚡ **高性能**: 优化的数据库查询和前端加载
- 🔍 **全文搜索**: 支持中文的智能搜索功能

## 📁 项目结构

```
hotpot-oa/
├── index.html                  # 主入口页面
├── dashboard.html              # 仪表板
├── assets/
│   └── js/
│       ├── app.js             # 主应用程序
│       ├── supabase-client.js # Supabase客户端
│       ├── auth.js            # 身份验证
│       ├── database.js        # 数据库操作
│       └── utils.js           # 工具函数
├── pages/
│   ├── formulas.html          # 配方管理
│   ├── documents.html         # 文档管理
│   ├── staff.html             # 员工管理
│   ├── stores.html            # 门店管理
│   ├── operations.html        # 运营管理
│   ├── reports.html           # 报表分析
│   └── admin.html             # 系统管理
├── components/
│   ├── sidebar.html           # 侧边栏组件
│   ├── header.html            # 页面头部组件
│   └── ...                    # 其他组件
├── config/
│   ├── supabase.js           # Supabase配置
│   └── constants.js          # 常量定义
└── sql/
    ├── schema.sql            # 数据库表结构
    ├── rls-policies.sql      # 行级安全策略
    ├── functions.sql         # 数据库函数
    └── seed-data.sql         # 初始数据
```

## 🛠️ 安装部署

### 前置要求
- 现代浏览器（Chrome、Firefox、Safari、Edge）
- Supabase账户
- Web服务器（可选，用于生产环境）

### 快速开始

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd hotpot-oa
   ```

2. **配置Supabase**
   - 在Supabase中创建新项目
   - 执行`sql/schema.sql`创建数据库表
   - 执行`sql/rls-policies.sql`设置安全策略
   - 执行`sql/functions.sql`创建数据库函数
   - 执行`sql/seed-data.sql`插入初始数据

3. **更新配置**
   - 编辑`config/supabase.js`
   - 更新Supabase URL和API密钥

4. **启动应用**
   - 直接打开`index.html`（开发环境）
   - 或部署到Web服务器（生产环境）

### 数据库设置

在Supabase SQL编辑器中依次执行以下文件：

```sql
-- 1. 创建表结构
\i sql/schema.sql

-- 2. 设置安全策略
\i sql/rls-policies.sql

-- 3. 创建函数
\i sql/functions.sql

-- 4. 插入初始数据
\i sql/seed-data.sql
```

## 👥 用户角色

系统支持四种用户角色：

- **管理员 (admin)**: 完全访问权限，系统管理
- **经理 (manager)**: 门店管理、员工管理、报表查看
- **员工 (staff)**: 基本功能使用、文档查看
- **访客 (viewer)**: 只读权限

## 🔐 安全特性

### 身份验证
- 基于Supabase Auth的安全认证
- 支持邮箱密码登录
- 会话管理和自动过期

### 权限控制
- 行级安全策略(RLS)确保数据隔离
- 基于角色的功能访问控制
- 操作日志记录和审计

### 数据安全
- 所有敏感操作记录审计日志
- 文档访问日志追踪
- 数据库级别的安全约束

## 📊 主要功能模块

### 1. 文档管理
- **文档上传**: 支持多种文件格式
- **分类管理**: 灵活的文档分类体系
- **搜索功能**: 全文搜索和标签搜索
- **版本控制**: 文档版本历史管理
- **权限控制**: 基于角色的访问控制

### 2. 配方管理
- **配方创建**: 详细的配方信息录入
- **原料管理**: 原料库存和成本管理
- **制作工艺**: 标准化制作流程
- **版本管理**: 配方版本迭代
- **成本计算**: 自动计算配方成本

### 3. 门店管理
- **门店信息**: 基本信息和营业时间
- **业绩统计**: 销售数据和趋势分析
- **员工分配**: 门店员工管理
- **库存管理**: 门店库存监控

### 4. 员工管理
- **员工档案**: 完整的员工信息
- **考勤管理**: 出勤记录和统计
- **培训记录**: 培训计划和进度
- **绩效评估**: 员工绩效管理

## 🎨 界面设计

### 设计原则
- **简洁明了**: 清晰的信息层次和导航
- **响应式**: 适配各种屏幕尺寸
- **一致性**: 统一的设计语言和交互模式
- **可访问性**: 符合Web可访问性标准

### 主要组件
- **侧边栏导航**: 主要功能模块导航
- **顶部搜索**: 全局搜索功能
- **数据表格**: 可排序、筛选的数据展示
- **模态框**: 表单输入和详情查看
- **图表组件**: 数据可视化展示

## 🔧 开发指南

### 代码结构
- **模块化**: 功能模块独立，便于维护
- **组件化**: 可复用的UI组件
- **配置化**: 集中的配置管理

### 扩展开发
1. **添加新页面**: 在`pages/`目录创建HTML文件
2. **添加新组件**: 在`components/`目录创建组件
3. **扩展数据库**: 修改`sql/schema.sql`添加新表
4. **添加新功能**: 在相应的JS文件中添加功能

### 最佳实践
- 使用Tailwind CSS类名进行样式设计
- 遵循现有的命名约定
- 添加适当的错误处理
- 记录重要操作的审计日志

## 📈 性能优化

### 前端优化
- 组件懒加载
- 图片优化和压缩
- 缓存策略
- 代码分割

### 数据库优化
- 合理的索引设计
- 查询优化
- 连接池管理
- 数据分页

## 🐛 故障排除

### 常见问题
1. **登录失败**: 检查Supabase配置和网络连接
2. **数据加载慢**: 检查数据库查询和网络状况
3. **权限错误**: 确认用户角色和RLS策略
4. **文件上传失败**: 检查文件大小和类型限制

### 调试技巧
- 使用浏览器开发者工具
- 查看控制台错误信息
- 检查网络请求状态
- 验证数据库连接

## 📝 更新日志

### v1.0.0 (2024-01-XX)
- 初始版本发布
- 基础功能模块完成
- 用户认证和权限系统
- 文档和配方管理功能

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进项目。

### 贡献流程
1. Fork项目
2. 创建功能分支
3. 提交更改
4. 创建Pull Request

## 📄 许可证

本项目采用MIT许可证。详见LICENSE文件。

## 📞 联系方式

如有问题或建议，请通过以下方式联系：

- 项目Issues: [GitHub Issues]
- 邮箱: [项目邮箱]

---

**火锅店OA系统** - 让火锅店管理更简单、更高效！
