<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>排班管理</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="timeline-controls">
            <div id="team-selector-container">
                <label for="team-selector">团队:</label>
                <select id="team-selector"></select>
            </div>
            <div class="sync-status-container">
                <span id="sync-status" class="sync-status initializing">初始化中</span>
            </div>
            <button id="settings-btn" title="设置时间范围">⚙️</button>
        </div>
        <div id="timeline-container">
            <div id="timeline-header">
                <!-- 时间刻度将在这里动态生成 -->
            </div>
            <div id="timeline-lanes">
                <div class="lane" data-user-id="current_user">
                    <div class="lane-header">
                        <span>我的排班</span>
                    </div>
                    <div class="lane-body">
                        <!-- 排班条目将在这里动态生成 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="settings-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>设置时间轴范围</h3>
            <p>选择您想要显示的时间范围。结束时间可大于开始时间以显示跨天视图（例如：开始=21, 结束=26 代表 21:00 至次日 02:00）。</p>
            <div class="form-group">
                <label for="start-hour-input">开始时间 (0-23点):</label>
                <input type="number" id="start-hour-input" min="0" max="23">
            </div>
            <div class="form-group">
                <label for="end-hour-input">结束时间 (1-48点):</label>
                <input type="number" id="end-hour-input" min="1" max="48">
            </div>
            <div class="modal-actions">
                <button id="cancel-settings-btn">取消</button>
                <button id="save-settings-btn">保存</button>
            </div>
        </div>
    </div>

    <div id="timeline-context-menu" class="context-menu" style="display: none;">
        <ul>
            <!-- 在泳道空白处右键时显示 -->
            <li id="ctx-add-work" class="ctx-lane-action">添加工作班次</li>
            <li id="ctx-add-break" class="ctx-lane-action">添加休息时间</li>
            <!-- 在已有排班条上右键时显示 -->
            <li id="ctx-edit-item" class="ctx-item-action">编辑详情...</li>
            <li id="ctx-change-to-work" class="ctx-item-action">转为工作班次</li>
            <li id="ctx-change-to-break" class="ctx-item-action">转为休息时间</li>
            <li class="ctx-item-action separator"></li>
            <li id="ctx-delete-item" class="ctx-item-action">删除</li>
        </ul>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="script.js"></script>
</body>
</html> 